<!DOCTYPE html>
<html lang="en">
  <!-- ************ Table Styling from https://datatables.net/ *************/ -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/select/1.2.5/css/select.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.1/css/buttons.dataTables.min.css">
<!--  <link rel="stylesheet" href="https://cdn.datatables.net/scroller/1.4.4/css/scroller.dataTables.min.css">-->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/select/1.2.5/js/dataTables.select.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
  <body>
    <!-- container object for using css with header customer info box-->
     
    <form name="create" id="create" action="create_order.php" method="post" onsubmit="show_confirm()">
    <div class="containerCreateOrder">

      <div class="headBox">
         <fieldset name="customerInfoGroup" id="customerInfoGroup">
         <legend>Order Information</legend>
            <div class="orderCustBox">

	        <div class="exDate">
	           <label for="expectedDate">Expected by Date </label>
	           <input type="date" required title="Address required" name="expectedDate" id="expectedDate"  
	             value="<?php echo isset($_POST['expectedDate']) ? $_POST['expectedDate'] : '' ?>">
	        </div>

                <div class="orderCustName">
                  <label for="selectCustomer">Customer Name </label>
	          <select name="selectCustomer" id="selectCustomer" onchange="cs(this, document.expectedDate)" autofocus>
	             <?php echo $c->customerName != "" ? "<option>".$c->customerName."</option>" : ""; ?>
	              <option>-- Search by Customer Name --</option>
	              <?php echo $custDropDownArray; ?>
	           </select>
                </div>
	
	        <input type="hidden" name="custSelected" id="custSelected" value="0">
                <div class="orderCustNum">
	          <label for="selectCustomerNum">Customer Number </label>
	          <select name="selectCustomerNum" id="selectCustomerNum" onchange="cNumS(this, document.create.billAddress1)">
	             <?php echo $c->customerNumber != "" ? "<option>".$c->customerNumber."</option>" : ""; ?>
	              <option>-- Search by Customer Number --</option>
	             <?php echo $custNumDropDownArray; ?>
	          </select>
                </div>
            </div>
          </fieldset>
      </div>

      <!-- shipping and billing boxes -->

      <!-- billing attributes box -->
      <div class="billingBox">
	<fieldset name="customerBillingGroup" id="customerBillingGroup">
        <legend>Billing Address</legend>

	<div class="addBox">
	<div class="add1">
	  <label for="billAddress1"><?php echo "Address 1: ".$c->billAddress1 ?></label>
	  <span name="billAddress1" id="billAddress1" size="38"></span><br><br>
	</div>

	<div class="add2">
          <label for="billAddress2"><?php echo "Address 2: ".$c->billAddress2 ?></label>
	  <span name="billAddress2" id="billAddress2" size="38"></span><br><br>
	</div>

	<div class="city">
          <label for="billCity"><?php echo "City: ".$c->billCity ?></label>
          <span name="billCity" id="billCity" size="26"></span><br><br>
	</div>

	<div class="state">
	  <label for="billState"><?php echo "State: ".$c->billState ?></label>
          <span name="billState" id="billState"></span><br>
	</div>

	<div class="zip">
          <label for="billZip"><?php echo "Zip: ".$c->billZip ?></label>
	  <span name="billZip" id="billZip"  size="7"></span><br>
	</div>
    <!--   <div class="check">
	    <br><input type="checkbox" name="billShipSame" id="billShipSame" value="false" onclick="setShipping()" > Shipping address same as billing address
	  </div> -->

	</div>
	</fieldset>
      </div>

      <!-- shipping attributes box -->
      <div class="shippingBox">
        <fieldset name="customerShippingGroup" id="customerShippingGroup">
        <legend>Shipping Address</legend>

	<div class="addBox">
	<div class="add1">
	<label for="shipAddress1"><?php echo "Address 1: ".$c->shipAddress1 ?></label>
	<span name="shipAddress1" id="shipAddress1" size="38"></span><br><br>
	</div>

	<div class="add2">
        <label for="shipAddress2"><?php echo "Address 2: ".$c->shipAddress2 ?></label>
	<span name="shipAddress2" id="shipAddress2" size="38"></span><br><br>
	</div>

	<div class="city">
	<label for="shipCity"><?php echo "City: ".$c->shipCity ?></label>
	<span name="shipCity" id="shipCity" size="26"></span><br><br>
	</div>

	<div class="state">
	<label for="shipState"><?php echo "State: ".$c->shipState ?></label>
	<span name="shipState" id="shipState"></span><br>
	</div>

	<div class="zip">
        <label for="shipZip"><?php echo "Zip: ".$c->shipZip ?></label>
	<span name="shipZip" id="shipZip" size="7"></span><br>
	</div>

	</div>
        </fieldset>
      </div>

      <!-- detail lines expanding box -->
      <div class="detailBox">
        <fieldset class="detailGroup" name="detailGroup" id="detailGroup">
        <legend>Detail Lines</legend>

      <!-- order totals -->
           <div class="orderShipCost">
             <label for="shippingCost">Shipping and Handling:</label>
             <span name="shippingCost"><?php ?></span>
           </div>

           <div class="orderGrandTot">
             <label for="grandTot">Grand Total:</label>
             <span name="grandTot"><?php ?></span>
           </div>

	   <fieldset class="blank" name="blank" id="blank">

              <table id="detailTable" class="display" style="width:100%">
               <thead>
		  <tr><th >Item Description</th><th>Item Number</th><th>Unit Price</th><th>Quantity</th><th>Unit of Measurement</th><th>Total</th><th></th></tr>
               </thead>
              <tbody>

               <?php echo $htmlDetailLines; ?>
              </tbody>
	      </table>

	      <button type="button" onclick="add_line()">ADD LINE</button>
              <input type="hidden" id="add" name="add" value="0">
	    </fieldset>
	</fieldset>
      </div>

      <!-- cancel box -->
      <div class="cancelBox">
	<button class="button buttonReset" type="reset">Cancel</button>
      </div>
	  
      <!-- submit box -->
      <div class="submitBox">
	<button class="button buttonSubmit" type="submit">Submit</button>
        <input type="hidden" name="which" id="which" value="0">
      </div>

    </div>
    </form>
      <!-- Shows a confirm dialog box. Sets the value of "which" based on user's answer-->
      <script>
	function show_confirm(){
	  if(confirm("Are you sure you want to create this order?") == true) {
            document.getElementById("which").value = "1";

            document.getElementById("shipAddress1").disabled = false;
            document.getElementById("shipAddress2").disabled = false;
            document.getElementById("shipCity").disabled = false;
            document.getElementById("shipZip").disabled = false;
            document.getElementById("shipState").disabled = false;
  	  }
	  else{
            document.getElementById("which").value = "0";
	  }
 	}
 
	function delete_line(value){
          document.getElementById("hDelete" + value).value = "1";
	  document.getElementById("create").submit();
         // var delObj = document.getElementById("row" + value).children.length;
         // alert(delObj);
          //delObj.className = "rowDeleted";
          document.getElementById("hDelete + value").value = "1";
	  document.getElementById("create").submit();
	}

        function hideDeletedLines(){
          //document.querySelectorAll("[hDelete='1']").className = "rowDeleted";
        }

	function itemDescSelected(value){
          var element = "itemdesc" + value;
	  if(document.getElementById(element).value != "-- Search by Item Description --"){
            document.getElementById("itemSelected" + value).value = "1";
	    autoTab(document.getElementById(element), document.getElementById("qty" + value));
	    document.getElementById("create").submit();
	  }
	}

	function itemNumSelected(value){
	  var element = "itemnum" + value;
	  if(document.getElementById(element).value != "-- Search by Item Number --"){
            document.getElementById("itemSelected" + value).value = "2";
	    document.getElementById("create").submit();
	  }
	}

	function add_line(){
           document.getElementById("add").value = "1";
	   document.getElementById("create").submit();
	}

	function update_total(value){
          var qty = document.getElementById("qty" + value).value;
	  var cost = document.getElementById("price" + value).textContent.replace("$", "");
	  document.getElementById("total" + value).textContent = "$" + (qty * cost);
	}

        function autoTab( current, to ){
          to.focus();
        }

        function cs(current, to) {
          if(document.getElementById("selectCustomer").value != "-- Select Customer --"){
            document.getElementById("custSelected").value = "1";
            document.getElementById("create").submit();
            to.focus();
	  }
	}
	
	function cNumS(current, to) {
          if(document.getElementById("selectCustomer").value != "-- Select Customer --"){
            document.getElementById("custSelected").value = "2";
            document.getElementById("create").submit();
            to.focus();
	  }
	}

	  <?php if($lineCounter == 0){
	   echo 'add_line();';}
	   echo 'hideDeletedLines();'; ?>

      $(document).ready(function() {
        var table = $('#detailTable').DataTable({
	  "paging": false,
          "bLengthChange": false,
          "ordering": false,
          "info":     false
	});

      } );

      </script>


  </body>
</html>

