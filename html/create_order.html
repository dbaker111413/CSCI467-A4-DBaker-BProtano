<!DOCTYPE html>
<html lang="en">
  <!-- ************ Table Styling from https://datatables.net/ *************/ -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/select/1.2.5/css/select.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.1/css/buttons.dataTables.min.css">
<!--  <link rel="stylesheet" href="https://cdn.datatables.net/scroller/1.4.4/css/scroller.dataTables.min.css">-->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/select/1.2.5/js/dataTables.select.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
  <body>
<style>
.detButton {
  padding: 2px 16px;
  font-family: Helvetica, sans-serif;
  background-color: white;
  border: none;
  color: black;
  //padding 16px 32px;
  text-align: center;
  text-decoration: none;
  //display: inline-block;
  margin: 4px 0px;
  -webkit-transition-duration: 0.4s;
  transition-duration: 0.4s;
  cursor: pointer;
}

.buttonDetail:hover {
 background-color: #66c2ff;
 color: white;
}

.buttonDetail {
 background-color: white;
 color: black;
 border: 2px solid #008CBA;
 font-size: 18px;
 font-weight: 400;
 margin-right: 9px;
 float: right;
}
</style>

    <!-- container object for using css with header customer info box-->
     
    <form name="create" id="create" action="create_order.php" method="post" onsubmit="show_confirm()">
    <div class="containerCreateOrder">

      <div class="headBox">
         <fieldset name="customerInfoGroup" id="customerInfoGroup">
         <legend>Order Information</legend>
            <div class="orderCustBox">

	        <div class="exDate">
	           <label for="expectedDate">Expected by Date </label>
	           <input type="date" required title="Date required" name="expectedDate" id="expectedDate"  
	             value="<?php echo isset($_POST['expectedDate']) ? $_POST['expectedDate'] : '' ?>">
	        </div>

                <div class="orderCustName">
                  <label for="selectCustomer">Customer Name </label>
	          <select name="selectCustomer" id="selectCustomer" onchange="cs(this, document.expectedDate)">
	             <?php echo $c->customerName != "" ? "<option>".$c->customerName."</option>" : ""; ?>
	              <option>-- Search by Customer Name --</option>
	              <?php echo $custDropDownArray; ?>
	           </select>
                </div>
	
	        <input type="hidden" name="custSelected" id="custSelected" value="0">
                <div class="orderCustNum">
	          <label for="selectCustomerNum">Customer Number </label>
	          <select name="selectCustomerNum" id="selectCustomerNum" onchange="cNumS(this, document.create.billAddress1)">
	             <?php echo $c->customerNumber != "" ? "<option>".$c->customerNumber."</option>" : ""; ?>
	              <option>-- Search by Customer Number --</option>
	             <?php echo $custNumDropDownArray; ?>
	          </select>
                </div>
            </div>
          </fieldset>
      </div>

      <!-- shipping and billing boxes -->

      <!-- billing attributes box -->
      <div class="billingBox">

	<fieldset name="customerBillingGroup" id="customerBillingGroup">
        <legend>Billing Address</legend>

	<div class="addBox">
	<div class="add1">
	  <label for="billAddress1">Address 1 </label>
	  <input type="text" disabled name="billAddress1" id="billAddress1" maxlength="25" size="38" 
	         value="<?php echo $c->billAddress1; ?>"><br><br>
	</div>

	<div class="add2">
          <label for="billAddress2">Address 2 </label>
	  <input type="text" disabled name="billAddress2" id="billAddress2" maxlength="25" size="38"
	         value="<?php echo $c->billAddress2; ?>"><br><br>
	</div>

	<div class="city">
          <label for="billCity">City </label>
          <input type="text" disabled name="billCity" id="billCity" maxlength="25" size="26"
		      value="<?php echo $c->billCity; ?>"><br><br>
	</div>

	<div class="state2">
	  <label for="billState">State </label> 
          <input type="text" disabled name="billState" id="billState" size="6" value="<?php echo $c->billState; ?>"><br>
<!--          <select name="billState" id="billState" 
	          value="<?php echo $c->billState != '' ? $c->billState : 'IL'?>">
	    <option value="AL">AL</option>
	    <option value="AK">AK</option>
	    <option value="AZ">AZ</option>
	    <option value="AR">AR</option>
	    <option value="CA">CA</option>
	    <option value="CO">CO</option>
	    <option value="CT">CT</option>
	    <option value="DE">DE</option>
	    <option value="DC">DC</option>
	    <option value="FL">FL</option>
	    <option value="GA">GA</option>
	    <option value="HI">HI</option>
	    <option value="ID">ID</option>
	    <option value="IL" selected>IL</option>
	    <option value="IN">IN</option>
	    <option value="IA">IA</option>
	    <option value="KS">KS</option>
	    <option value="KY">KY</option>
	    <option value="LA">LA</option>
	    <option value="ME">ME</option>
	    <option value="MD">MD</option>
	    <option value="MA">MA</option>
	    <option value="MI">MI</option>
	    <option value="MN">MN</option>
	    <option value="MS">MS</option>
	    <option value="MO">MO</option>
	    <option value="MT">MT</option>
	    <option value="NE">NE</option>
	    <option value="NV">NV</option>
	    <option value="NH">NH</option>
	    <option value="NJ">NJ</option>
	    <option value="NM">NM</option>
  	    <option value="NY">NY</option>
	    <option value="NC">NC</option>
	    <option value="ND">ND</option>
	    <option value="OH">OH</option>
	    <option value="OK">OK</option>
	    <option value="OR">OR</option>
	    <option value="PA">PE</option>
	    <option value="RI">RI</option>
	    <option value="SC">SC</option>
	    <option value="SD">SD</option>
	    <option value="TN">TN</option>
	    <option value="TX">TX</option>
	    <option value="UT">UT</option>
	    <option value="VT">VT</option>
	    <option value="VA">VA</option>
	    <option value="WA">WA</option>
	    <option value="WV">WV</option>
	    <option value="WI">WI</option>
	    <option value="WY">WY</option>     
	  </select><br>-->
	</div>

	<div class="zip">
          <label for="billZip">Zip </label>
	  <input type="text" disabled name="billZip" id="billZip" minlength="5" maxlength="5" size="7"
	         value="<?php echo $c->billZip; ?>"><br>
	</div>

	</div>
	</fieldset>

      </div>

      <!-- shipping attributes box -->
      <div class="shippingBox">

        <fieldset name="customerShippingGroup" id="customerShippingGroup">
        <legend>Shipping Address</legend>

	<div class="addBox">
	<div class="add1">
	<label for="shipAddress1">Address 1 </label>
	<input type="text" disabled name="shipAddress1" id="shipAddress1" maxlength="25" size="38"
	       value="<?php echo $c->shipAddress1; ?>"><br><br>
	</div>

	<div class="add2">
        <label for="shipAddress2">Address 2 </label>
	<input type="text" disabled name="shipAddress2" id="shipAddress2" maxlength="25" size="38"
	       value="<?php echo $c->shipAddress2; ?>"><br><br>
	</div>

	<div class="city">
	<label for="shipCity">City </label>
	<input type="text" disabled name="shipCity" id="shipCity" maxlength="25" size="26"
	       value="<?php echo $c->shipCity; ?>"><br><br>
	</div>

	<div class="state2">
	<label for="shipState">State </label>
        <input type="text" name="shipState" id="shipState" disabled size="6" value="<?php echo $c->shipState; ?>"><br>
<!--	<select name="shipState" id="shipState"
	       value="<?php echo $c->shipState != '' ? $c->shipState : 'IL'; ?>">
 	    <option value="AL">AL</option>
	    <option value="AK">AK</option>
	    <option value="AZ">AZ</option>
	    <option value="AR">AR</option>
	    <option value="CA">CA</option>
	    <option value="CO">CO</option>
	    <option value="CT">CT</option>
	    <option value="DE">DE</option>
	    <option value="DC">DC</option>
	    <option value="FL">FL</option>
	    <option value="GA">GA</option>
	    <option value="HI">HI</option>
	    <option value="ID">ID</option>
	    <option value="IL" selected>IL</option>
	    <option value="IN">IN</option>
	    <option value="IA">IA</option>
	    <option value="KS">KS</option>
	    <option value="KY">KY</option>
	    <option value="LA">LA</option>
	    <option value="ME">ME</option>
	    <option value="MD">MD</option>
	    <option value="MA">MA</option>
	    <option value="MI">MI</option>
	    <option value="MN">MN</option>
	    <option value="MS">MS</option>
	    <option value="MO">MO</option>
	    <option value="MT">MT</option>
	    <option value="NE">NE</option>
	    <option value="NV">NV</option>
	    <option value="NH">NH</option>
	    <option value="NJ">NJ</option>
	    <option value="NM">NM</option>
  	    <option value="NY">NY</option>
	    <option value="NC">NC</option>
	    <option value="ND">ND</option>
	    <option value="OH">OH</option>
	    <option value="OK">OK</option>
	    <option value="OR">OR</option>
	    <option value="PA">PE</option>
	    <option value="RI">RI</option>
	    <option value="SC">SC</option>
	    <option value="SD">SD</option>
	    <option value="TN">TN</option>
	    <option value="TX">TX</option>
	    <option value="UT">UT</option>
	    <option value="VT">VT</option>
	    <option value="VA">VA</option>
	    <option value="WA">WA</option>
	    <option value="WV">WV</option>
	    <option value="WI">WI</option>
	    <option value="WY">WY</option>  
	</select><br>-->
	</div>

	<div class="zip">
        <label for="shipZip">Zip </label>
	<input type="text" disabled  name="shipZip" id="shipZip" minlength="5" maxlength="5" size="7"
	       value="<?php echo $c->shipZip; ?>"<br><br>
	</div>

	</div>
        </fieldset>

 
      </div>

      <!-- order totals -->
      <div class="totesBox">
        <fieldset class="totesGroup">
        <legend>Totals</legend>
           <div class="orderShipCost">
             <label for="shippingCost", value=<?php echo $shippingCost ?>><?php echo "Shipping and Handling: $".round($shippingCost,2) ?></label>
             <span name="shippingCost"></span>
           </div>
	   
           <div class="orderSubTot">
	     <label for="subTot", value=<?php echo $subTotal ?>><?php echo "Sub Total: $".round($subTotal,2) ?></label>
	     <span name="subTot"></span>
	   </div>
           <div class="orderGrandTot">
             <label for="grandTot" value=<?php echo $shippingCost ?>><?php echo "Grand Total: $".round($totalCost,2) ?></label>
             <span name="grandTot"></span>
           </div>
         </fieldset>
       </div>

      <!-- detail lines expanding box -->
      <div class="detailBox">
        <fieldset class="detailGroup" name="detailGroup" id="detailGroup">
        <legend>Detail Lines</legend>


	   <fieldset class="blank" name="blank" id="blank">

              <table id="detailTable" class="display" style="width:100%">
               <thead>
		  <tr><th align="left">Item Description</th><th align="left">Item Number</th><th align="right">Unit Price</th><th align="center" >Quantity</th><th  align="center">Unit of Measurement</th><th  align="right">Total </th><th  align="center">Add/Remove Line</th></tr>
               </thead>
              <tbody>

               <?php echo $htmlDetailLines; ?>
              </tbody>
	      </table>
              <div class="addButton">
	      <button class="button buttonAdd" type="button" onclick="add_line()">ADD LINE</button>
              <input type="hidden" id="add" name="add" value="0">
	      </div>
	    </fieldset>
	</fieldset>
      </div>

      <!-- cancel box -->
      <div class="cancelBox">
	<a class="button buttonReset" href="create_order.php">Cancel</a>
      </div>


      <div class="printBox">
      <a class="detButton buttonDetail" onclick="window.print();return false;">Print</a>
      </div>

      <!-- submit box -->
      <div class="submitBox">
	<button class="button buttonSubmit" type="submit">Submit</button>
        <input type="hidden" name="which" id="which" value="0">
      </div>

    </div>
    </form>
      <!-- Shows a confirm dialog box. Sets the value of "which" based on user's answer-->
      <script>
	function show_confirm(){
	  if(confirm("Are you sure you want to create this order?") == true) {
            if (document.getElementById("selectCustomer").value != "-- Search by Customer Name --" 
                 && document.getElementById("selectCustomerNum").value != "-- Search by Customer Number --"){
              document.getElementById("which").value = "1"; 
            }else {
              alert("Must select a customer before creating Customer Order");
              return false;
            }
  	  }
	  else{
            document.getElementById("which").value = "0";
	  }
 	}
 
	function delete_line(value){
          document.getElementById("hDelete" + value).value = "1";
	  document.getElementById("create").submit();
         // var delObj = document.getElementById("row" + value).children.length;
         // alert(delObj);
          //delObj.className = "rowDeleted";
          document.getElementById("hDelete + value").value = "1";
	  document.getElementById("create").submit();
	}

        function hideDeletedLines(){
          //document.querySelectorAll("[hDelete='1']").className = "rowDeleted";
        }

	function itemDescSelected(value){
          var element = "itemdesc" + value;
	  if(document.getElementById(element).value != "-- Search by Item Description --"){
            document.getElementById("itemSelected" + value).value = "1";
	    autoTab(document.getElementById(element), document.getElementById("qty" + value));
	    document.getElementById("create").submit();
	  }
	}

	function itemNumSelected(value){
	  var element = "itemnum" + value;
	  if(document.getElementById(element).value != "-- Search by Item Number --"){
            document.getElementById("itemSelected" + value).value = "2";
	    document.getElementById("create").submit();
	  }
	}

	function add_line(){
           document.getElementById("add").value = "1";
	   document.getElementById("create").submit();
	}

	function update_total(value){
          var qty = document.getElementById("qty" + value).value;
	  if(qty == 0){
            document.getElementById("hDelete" + value).value = "1";
	  }
	  else{
            document.getElementById("hDelete" + value).value = "0";
	  }
	  var cost = document.getElementById("price" + value).textContent.replace("$", "");
	  document.getElementById("total" + value).textContent = "$" + (qty * cost);
	  document.getElementById("create").submit();
	}

        function autoTab( current, to ){
          to.focus();
        }

        function cs(current, to) {
          if(document.getElementById("selectCustomer").value != "-- Select Customer --"){
            document.getElementById("custSelected").value = "1";
            document.getElementById("create").submit();
            to.focus();
	  }
	}
	
	function cNumS(current, to) {
          if(document.getElementById("selectCustomer").value != "-- Select Customer --"){
            document.getElementById("custSelected").value = "2";
            document.getElementById("create").submit();
            to.focus();
	  }
	}

	  <?php if($lineCounter == 0){
	   echo 'add_line();';}
	   echo 'hideDeletedLines();'; ?>

      $(document).ready(function() {
        var table = $('#detailTable').DataTable({
	  "paging": false,
          "bLengthChange": false,
	  "bFilter": false,
          "ordering": false,
          "info":     false
	});

      } );

      </script>


  </body>
</html>

